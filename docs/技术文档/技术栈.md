# AI智能巡检系统 - 技术栈

## 技术栈描述

| 技术维度 | 选型 | 版本 | 说明 |
|----------|------|------|------------------------------------------------------|
| 框架 | Spring Boot | 2.7.18 | 主应用框架，提供自动配置和嵌入式服务器 |
| 构建工具 | Maven | 3.x | 项目构建和依赖管理，支持多环境配置 |
| 编程语言 | Java | 11 | 主要开发语言，支持现代Java特性 |
| 数据库 | H2 Database | 内存数据库 | 开发环境使用，支持快速原型开发 |
| ORM框架 | MyBatis | 3.5+ | 数据映射框架，提供灵活的SQL控制 |
| 前端框架 | React | 18 | 现代化前端框架，组件化开发 |
| UI组件库 | Ant Design | 4.24.15 | 企业级UI组件库，提供丰富的交互组件 |
| 构建工具 | Babel | Standalone | JSX转译器，支持现代JavaScript语法 |
| 自动化测试 | Playwright | 1.47.0 | Web自动化框架，支持多浏览器操作 |
| AI服务 | DashScope SDK | 2.20.0 | 阿里云通义千问多模态大模型SDK |
| JSON处理 | FastJSON | 2.0.58 | 高性能JSON处理库 |
| 工具库 | Apache Commons Lang3 | 3.12.0 | 常用工具类库，字符串和对象处理 |
| 集合工具 | Apache Commons Collections4 | 4.5.0-M2 | 增强的集合操作工具 |
| 代码简化 | Lombok | 1.18.24 | 注解驱动的代码生成工具 |
| 模板引擎 | Thymeleaf | Spring Boot集成 | 服务端模板引擎，支持页面渲染 |

## 1.3 部署环境和重点配置项

### 1.3.1 环境分类

| 环境名称 | 配置描述 | 环境说明 | 用途 |
|----------|----------|----------|------|
| Development | 本地开发环境 | 开发人员本地环境 | 日常开发调试 |
| Testing | 测试环境 | 功能测试环境 | 功能验证测试 |
| Staging | 预发布环境 | 生产环境镜像 | 上线前最终验证 |
| Production | 生产环境 | 正式生产环境 | 线上服务运行 |

### 1.3.2 核心配置说明

#### 应用基础配置
```yaml
spring:
  application:
    name: ai-inspection
  profiles:
    active: ${ENV_TYPE:dev}
  
server:
  port: ${SERVER_PORT:8080}
  servlet:
    context-path: /
```

#### 数据库配置
```yaml
spring:
  datasource:
    url: jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false
    driver-class-name: org.h2.Driver
    username: sa
    password: 
  
  h2:
    console:
      enabled: true
      path: /h2-console
      
  sql:
    init:
      mode: embedded
      schema-locations: 
        - classpath:inspection_result.sql
        - classpath:inspection_prompt.sql  
        - classpath:inspection_tag.sql
```

#### MyBatis配置
```yaml
mybatis:
  mapper-locations: classpath:mapper/*.xml
  type-aliases-package: org.example.entity
  configuration:
    map-underscore-to-camel-case: true
    cache-enabled: true
    lazy-loading-enabled: true
    aggressive-lazy-loading: false
    multiple-result-sets-enabled: true
    use-column-label: true
    use-generated-keys: true
    default-executor-type: reuse
    default-statement-timeout: 25000
```

#### AI服务配置
```yaml
dashscope:
  api:
    model: qwen-vl-max
    key: ${DASHSCOPE_API_KEY}
    url: xxx
```

### 1.3.3 环境差异配置

| 配置项 | Development | Testing | Staging | Production |
|--------|-------------|---------|---------|------------|
| **数据库** | H2内存数据库 | H2文件数据库 | MySQL | MySQL集群 |
| **AI服务** | 开发环境Key | 测试环境Key | 预发环境Key | 生产环境Key |
| **日志级别** | DEBUG | INFO | WARN | ERROR |
| **定时任务** | 关闭 | 5分钟 | 1分钟 | 1分钟 |
| **跨域配置** | 全开放 | 限制域名 | 限制域名 | 严格限制 |

## 1.4 技术架构特点

### 1.4.1 前端技术特点

- **现代化框架**: 使用React 18最新版本，支持Hooks和函数式组件
- **企业级UI**: Ant Design提供完整的企业级组件和设计规范
- **无构建部署**: 通过CDN直接加载，简化部署流程
- **实时转译**: Babel Standalone支持浏览器端JSX转译
- **响应式设计**: 支持多屏幕尺寸适配，移动端友好

### 1.4.2 后端技术特点

- **微服务就绪**: Spring Boot提供完整的微服务基础设施
- **自动配置**: 减少手动配置，提高开发效率
- **嵌入式数据库**: H2支持快速原型和开发环境部署
- **灵活ORM**: MyBatis提供SQL级别的精细控制
- **异步支持**: Spring Scheduler支持定时任务和异步处理

### 1.4.3 AI集成特点

- **多模态支持**: DashScope SDK支持图像和文本的联合分析
- **高性能调用**: 异步调用机制，避免阻塞主线程
- **错误恢复**: 完善的重试和降级机制
- **成本控制**: 智能的调用频次控制和缓存策略

### 1.4.4 自动化测试特点

- **跨浏览器**: Playwright支持Chrome、Firefox、Safari等主流浏览器
- **无头模式**: 支持无界面模式运行，适合CI/CD集成
- **智能等待**: 自动等待页面元素加载，提高测试稳定性
- **截图对比**: 内置截图功能，支持视觉回归测试

## 1.5 依赖管理策略

### 1.5.1 版本控制
- **主框架**: 使用稳定的LTS版本，确保生产环境稳定性
- **第三方库**: 选择活跃维护的库，定期更新安全补丁
- **AI SDK**: 跟随阿里云官方版本，获得最新功能支持

### 1.5.2 安全考虑
- **依赖扫描**: 定期进行依赖安全扫描，及时更新有风险的依赖
- **最小化原则**: 只引入必要的依赖，减少攻击面
- **版本锁定**: 锁定具体版本号，避免依赖升级带来的不稳定因素

### 1.5.3 性能优化
- **轻量化选择**: 优先选择轻量级的库，减少启动时间和内存占用
- **懒加载**: 支持按需加载的组件，提高应用启动速度
- **缓存策略**: 合理使用缓存，减少重复计算和网络调用

# AI智能巡检系统_产品知识库

## 元数据

- 产品名称：AI智能巡检系统
- 修订版本：v1.0.0
- 修订时间：2025-01-08
- 修订人：产品经理

## 产品简介

AI智能巡检系统是一款基于人工智能技术的自动化质量保障平台，通过集成阿里云通义千问多模态大模型，实现对业务系统的智能化监控与异常检测。系统支持页面截图对比、数据指标分析、多维度阈值判断等功能，为企业提供全方位的数字化巡检解决方案。

**核心优势：**
- **智能化检测**：集成DashScope多模态AI，支持图像、文本、数据的智能比对分析
- **自动化巡检**：定时任务机制，实现7x24小时无人值守的业务监控
- **多场景覆盖**：支持页面巡检和API接口巡检，满足不同业务需求
- **灵活配置**：可视化管理界面，支持标签分类、Prompt定制、巡检规则配置

**页面巡检模式：** 通过Playwright自动化框架进行页面截图采集，利用AI视觉识别技术对比前后时间点的页面变化，智能识别数据异常、UI变更、功能故障等问题。支持登录态保持、多步骤操作流程、复杂页面元素定位等高级功能。

**API接口巡检：** 基于HTTP请求的接口响应数据分析，通过JSON数据比对、数值波动分析、阈值监控等方式，实现对后端服务稳定性的持续监控。支持认证token管理、请求参数配置、响应数据解析等完整链路监控。

## 产品术语表

### 1. 巡检管理
| 术语 | 描述 | 备注 |
|:----:|:----:|:----:|
| 巡检任务 | 系统定时执行的自动化检测任务，包括页面截图、数据采集、AI分析等完整流程 | 核心业务流程 |
| 巡检类型 | 区分不同检测方式的分类标识，包括页面巡检(page)和API接口巡检(api) | 功能分类标准 |
| 检查标识 | 巡检任务执行结果的状态标识：Y(通过)、N(不通过)、U(未检查) | 结果状态管理 |
| 业务标签 | 用于分类管理不同业务场景的标识符，关联巡检配置和执行策略 | 分类管理机制 |
| 工号绑定 | 将巡检任务与具体用户账号关联，用于登录态模拟和权限验证 | 用户身份管理 |
| 方法名 | 巡检任务中具体执行的检测方法标识，用于匹配对应的Prompt模板 | 功能映射标识 |

### 2. AI检测引擎
| 术语 | 描述 | 备注 |
|:----:|:----:|:----:|
| DashScope API | 阿里云通义千问多模态大模型服务接口，提供图像识别和智能分析能力 | 核心AI服务 |
| 多模态对话 | 支持同时处理图像和文本信息的AI交互模式，用于复杂场景的智能分析 | AI交互方式 |
| Prompt工程 | 通过精心设计的提示词模板，引导AI模型产生准确的检测结果 | AI优化技术 |
| 系统提示词 | 内置的AI行为规范指令，确保模型输出符合业务要求的标准格式 | AI行为约束 |
| 阈值比较工具 | 用于数值类指标的智能判断，支持百分比、绝对值等多种比较模式 | 数据分析工具 |
| 波动分析工具 | 针对时序数据变化趋势的智能分析，识别异常波动和正常范围 | 趋势分析功能 |
| JSON清洗工具 | 用于处理AI返回结果的数据清洗和格式化工具，确保数据质量 | 数据处理工具 |

### 3. 页面自动化
| 术语 | 描述 | 备注 |
|:----:|:----:|:----:|
| Playwright框架 | 微软开源的Web自动化测试框架，支持多浏览器页面操作和截图 | 自动化基础设施 |
| 页面截图处理器 | 负责执行页面访问、截图采集、图片存储等功能的核心组件 | 核心处理组件 |
| 登录态模拟 | 通过自动化脚本模拟用户登录过程，维持会话状态进行页面巡检 | 身份认证机制 |
| 截图对比 | 将当前页面截图与历史基准图片进行AI智能对比分析 | 核心检测机制 |
| 浏览器上下文 | 独立的浏览器会话环境，包含Cookie、LocalStorage等状态信息 | 会话管理 |
| 元素定位策略 | 通过CSS选择器、XPath等方式精确定位页面元素的技术方案 | 页面交互技术 |

### 4. 数据管理
| 术语 | 描述 | 备注 |
|:----:|:----:|:----:|
| 巡检结果 | 记录每次巡检任务执行详情的数据实体，包括请求参数、响应结果、错误信息等 | 核心数据模型 |
| 差异指标 | AI分析识别出的数据不一致点，包含期望值、实际值、差异原因等详细信息 | 异常数据结构 |
| 请求参数 | 巡检任务执行时的输入配置，包含Prompt内容、图片信息、检测规则等 | 输入数据管理 |
| 响应数据 | AI模型返回的分析结果，包含检测结论、差异详情、置信度等信息 | 输出数据管理 |
| 错误信息 | 巡检过程中发现的异常情况记录，支持JSON格式的结构化存储 | 异常信息管理 |
| 历史数据 | 用于对比分析的历史巡检记录，支持时间序列查询和趋势分析 | 历史数据管理 |

### 5. 配置管理
| 术语 | 描述 | 备注 |
|:----:|:----:|:----:|
| 标签配置 | 业务场景的分类配置，包含登录信息、URL地址、描述信息等完整配置 | 业务配置管理 |
| Prompt模板 | 针对不同检测场景设计的AI提示词模板，与业务标签和方法名关联 | AI模板管理 |
| 登录凭证 | 用于页面自动化登录的账号密码信息，支持加密存储和安全管理 | 安全凭证管理 |
| URL配置 | 包含登录地址和巡检目标地址的URL管理，支持参数化和动态替换 | 地址配置管理 |
| 定时策略 | 控制巡检任务执行频率和时机的配置，支持cron表达式和固定间隔 | 调度配置管理 |
| 阈值规则 | 用于数值类指标判断的阈值配置，支持百分比、绝对值等多种模式 | 规则配置管理 |

## 功能列表

### 1. 标签管理

- [业务标签配置] 解释：AI智能巡检系统_产品知识库/功能模块/标签管理/
  - 标签基础信息：业务类型编码、标签名称、标签描述等基础信息配置
  - 登录凭证管理：巡检账号、密码、登录URL等认证信息安全存储
  - 巡检目标配置：巡检URL、页面路径、检测范围等目标系统配置
  - 标签分类查询：支持按业务类型、标签名称、描述信息等多维度检索
  - 标签生命周期：标签新增、编辑、删除、状态管理等完整生命周期
  - 关联关系管理：与Prompt模板、巡检任务的关联关系维护

- [标签关联功能] 解释：AI智能巡检系统_产品知识库/功能模块/关联管理/
  - Prompt管理集成：从标签页面直接跳转到对应的Prompt管理功能
  - 巡检结果集成：从标签页面直接跳转到对应的巡检结果查看功能
  - 统一配置界面：通过Tab页面实现标签、Prompt、巡检的一体化管理
  - 数据联动更新：标签信息变更时自动同步更新关联的配置信息

### 2. Prompt模板管理

- [AI提示词配置] 解释：AI智能巡检系统_产品知识库/功能模块/Prompt管理/
  - Prompt基础信息：Prompt名称、关联业务标签、执行方法名等基础配置
  - 提示词内容编辑：支持多行文本编辑的Prompt内容配置和优化
  - 方法关联映射：建立Prompt模板与具体检测方法的映射关系
  - 模板分类查询：支持按业务标签、Prompt名称、方法名等条件检索
  - 版本历史管理：Prompt内容的修改历史记录和版本回溯功能
  - 效果评估分析：统计Prompt模板的使用效果和准确率指标

- [智能提示词优化] 解释：AI智能巡检系统_产品知识库/功能模块/Prompt优化/
  - 模板继承机制：支持基于已有模板创建新的Prompt变体
  - 参数化支持：在Prompt中支持动态参数替换和上下文注入
  - 多场景适配：针对不同巡检场景提供专门优化的Prompt模板
  - 效果反馈循环：基于巡检结果反馈持续优化Prompt效果

### 3. 巡检结果管理

- [巡检任务执行] 解释：AI智能巡检系统_产品知识库/功能模块/巡检执行/
  - 任务状态管理：巡检任务的执行状态跟踪和生命周期管理
  - 多类型支持：页面巡检和API接口巡检的统一任务管理
  - 实时执行监控：巡检任务执行过程的实时状态监控和进度跟踪
  - 异常处理机制：巡检执行异常的捕获、记录和告警处理
  - 并发任务调度：支持多个巡检任务的并发执行和资源协调
  - 结果数据持久化：巡检结果的结构化存储和历史数据管理

- [结果分析展示] 解释：AI智能巡检系统_产品知识库/功能模块/结果展示/
  - 结果列表查询：支持多维度条件的巡检结果查询和筛选
  - 差异详情展示：以可展开面板形式展示AI分析发现的差异详情
  - 图片对比查看：支持当前截图与历史截图的对比查看功能
  - 数据指标分析：展示期望值、实际值、差异原因等详细分析结果
  - 检查状态标识：通过颜色标签直观显示通过、不通过、未检查状态
  - 错误信息管理：结构化展示和管理巡检过程中的错误信息

- [历史数据分析] 解释：AI智能巡检系统_产品知识库/功能模块/历史分析/
  - 时间序列分析：基于时间维度的巡检结果趋势分析
  - 异常模式识别：通过历史数据识别常见的异常模式和规律
  - 稳定性评估：评估不同业务系统的稳定性和可靠性指标
  - 报告生成功能：自动生成巡检报告和质量分析报告

### 4. 自动化巡检引擎

- [页面巡检处理器] 解释：AI智能巡检系统_产品知识库/功能模块/页面巡检/
  - 浏览器自动化：基于Playwright的浏览器控制和页面操作
  - 登录流程模拟：自动化登录目标系统并维持会话状态
  - 智能截图采集：智能等待页面加载完成后进行高质量截图
  - 多浏览器支持：支持Chrome、Firefox、Safari等多种浏览器
  - 移动端适配：支持移动端页面的自动化巡检和截图对比
  - 复杂交互处理：支持表单填写、按钮点击、页面滚动等复杂操作

- [AI图像分析引擎] 解释：AI智能巡检系统_产品知识库/功能模块/AI分析/
  - 多模态AI集成：集成阿里云通义千问多模态大模型服务
  - 智能图像对比：通过AI视觉识别技术进行页面截图智能对比
  - 差异智能识别：自动识别页面中的数据变化、布局调整、元素异常等
  - 上下文理解：结合业务场景和历史数据进行智能分析判断
  - 置信度评估：为每个检测结果提供置信度评分和可靠性评估
  - 误报率优化：通过机器学习持续优化误报率和检测准确性

### 5. 数据比较工具集

- [阈值比较工具] 解释：AI智能巡检系统_产品知识库/功能模块/阈值比较/
  - 数值阈值判断：支持绝对值和百分比两种阈值比较模式
  - 多维度数据支持：支持整数、浮点数、百分比等多种数据类型
  - 动态阈值配置：支持基于历史数据的动态阈值自动调整
  - 区间判断逻辑：支持正常范围、警告范围、异常范围的分级判断
  - 业务规则定制：支持针对不同业务场景的定制化阈值规则

- [波动分析工具] 解释：AI智能巡检系统_产品知识库/功能模块/波动分析/
  - 时序数据分析：分析数据在时间维度上的变化趋势和波动特征
  - 异常波动检测：识别超出正常波动范围的异常数据变化
  - 季节性分析：识别数据的周期性变化模式和季节性特征
  - 趋势预测功能：基于历史数据预测未来的数据变化趋势
  - 相关性分析：分析不同指标之间的关联关系和影响因素

- [字符串比较工具] 解释：AI智能巡检系统_产品知识库/功能模块/字符串比较/
  - 精确匹配检测：支持字符串的精确匹配和差异检测
  - 模糊匹配算法：基于编辑距离等算法的字符串相似度计算
  - 正则表达式支持：支持基于正则表达式的复杂字符串模式匹配
  - 多语言字符支持：支持中文、英文、特殊字符等多种字符编码
  - 忽略策略配置：支持忽略大小写、空格、特殊字符等配置选项

## 非功能性要求列表

### 1. 性能要求

- [响应时间要求] 解释：AI智能巡检系统_产品知识库/非功能需求/性能指标/
  - 页面加载时间：Web界面页面加载时间不超过3秒
  - 巡检任务执行：单次页面巡检任务完成时间不超过30秒
  - AI分析响应：多模态AI分析响应时间不超过10秒
  - 数据库查询：复杂查询响应时间不超过2秒
  - 接口响应时间：REST API接口平均响应时间不超过500ms

- [并发处理能力] 解释：AI智能巡检系统_产品知识库/非功能需求/并发性能/
  - 同时支持不少于10个并发巡检任务执行
  - Web界面支持不少于50个并发用户访问
  - 数据库连接池支持不少于20个并发连接
  - AI服务调用支持不少于5个并发请求处理

### 2. 可靠性要求

- [系统稳定性] 解释：AI智能巡检系统_产品知识库/非功能需求/可靠性指标/
  - 系统可用性：≥99.5%的月度可用性保证
  - 故障恢复时间：系统故障后平均恢复时间不超过5分钟
  - 数据完整性：确保巡检数据的完整性和一致性，数据丢失率<0.1%
  - 容错处理：具备完善的异常处理和错误恢复机制

### 3. 安全性要求

- [数据安全保护] 解释：AI智能巡检系统_产品知识库/非功能需求/安全要求/
  - 敏感数据加密：登录密码、API密钥等敏感信息采用AES-256加密存储
  - 传输安全：支持HTTPS协议保证数据传输安全
  - 访问控制：实现基于角色的访问控制和权限管理
  - 审计日志：完整记录用户操作和系统行为的审计日志

### 4. 可维护性要求

- [系统维护性] 解释：AI智能巡检系统_产品知识库/非功能需求/维护性要求/
  - 日志管理：提供完善的分级日志记录和查询功能
  - 配置管理：支持热更新配置，无需重启系统
  - 监控告警：提供系统健康状态监控和异常告警机制
  - 版本管理：支持灰度发布和版本回滚机制

## 设计规范

### 1. 技术架构规范

- [系统架构设计] 解释：AI智能巡检系统_产品知识库/设计规范/架构设计/
  - 采用分层架构设计：表示层、业务逻辑层、数据访问层、基础设施层
  - 基于Spring Boot框架构建，遵循IoC和AOP设计原则
  - 数据库采用MyBatis ORM框架，支持SQL优化和缓存机制
  - 集成阿里云DashScope AI服务，遵循API调用最佳实践

### 2. 数据设计规范

- [数据模型设计] 解释：AI智能巡检系统_产品知识库/设计规范/数据设计/
  - 采用关系型数据库设计，支持ACID事务特性
  - 数据表设计遵循第三范式，确保数据一致性和完整性
  - 建立完善的索引策略，优化查询性能
  - 实现数据的逻辑删除和版本控制机制

### 3. 接口设计规范

- [API接口规范] 解释：AI智能巡检系统_产品知识库/设计规范/接口设计/
  - 遵循RESTful API设计原则，使用标准HTTP方法
  - 统一的响应数据格式：success、content、errorMsg、errorCode
  - 实现统一的异常处理和错误码管理
  - 支持跨域访问(CORS)和API版本管理

### 4. 前端设计规范

- [用户界面规范] 解释：AI智能巡检系统_产品知识库/设计规范/UI设计/
  - 采用Ant Design组件库，确保界面一致性和用户体验
  - 响应式布局设计，支持不同屏幕尺寸的设备访问
  - 遵循无障碍设计原则，支持键盘导航和屏幕阅读器
  - 实现国际化支持，目前支持中文简体界面
